<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <title>Effective Mud Density</title>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body onkeyup="effectiveMudDensity();" onclick="effectiveMudDensity();">
    <div class="container">
      <br>
      <h1 class="fw-light">Effective Mud Density</h1>

      <div class="accordion" id="accordionPanelsStayOpenExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="panelsStayOpen-headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
              Formula & Calculator
            </button>
          </h2>
          <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
            <div class="accordion-body row align-items-center">

              <div class="col-sm">
                <label for="mud_weight" class="form-label">Mud Weight</label>
                <div class="input-group mb-3">
                  <input type="number" class="form-control" id="mud_weight" aria-describedby="mud_weight-addon" placeholder="9.2" value="9.2">
                  <span class="input-group-text" id="mud_weight-addon">ppg</span>
                </div>
              </div>

              <div class="col-sm">
                <label for="flow_rate" class="form-label">Flow Rate</label>
                <div class="input-group mb-3">
                  <input type="number" class="form-control" id="flow_rate" aria-describedby="flow_rate-addon" placeholder="900" value="900">
                  <span class="input-group-text" id="flow_rate-addon">gpm</span>
                </div>
              </div>

              <div class="col-sm">
                <label for="hole_size" class="form-label">Hole Size</label>
                <div class="input-group mb-3">
                  <input type="number" class="form-control" id="hole_size" aria-describedby="hole_size-addon" placeholder="12.25" value="12.25">
                  <span class="input-group-text" id="hole_size-addon">in.</span>
                </div>
              </div>

              <div class="col-sm">
                <label for="ROP" class="form-label">ROP</label>
                <div class="input-group mb-3">
                  <input type="number" class="form-control" id="ROP" aria-describedby="rop-addon" placeholder="150" value="150">
                  <span class="input-group-text" id="rop-addon">fph</span>
                </div>
              </div>

            </div>
            <div class="card-footer">
              <div class="row text-center">
                <div class="col">Effective Mud Density: <strong id="emd">9.394</strong> ppg</div>
              </div>
              <div class="row text-center">
                <div class="small text-truncate"><small><var>$$Effective Mud Density = { ((Mud Weight * Flow Rate)+(0.01414296 * ROP * Hole Size^2)) \over ( Flow Rate+( 0.00067995 * ROP * Hole Size^2)) }$$</var></small></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    <script>

      function effectiveMudDensity() {
        var mudWeight = document.getElementById("mud_weight").value;
        var flowRate = document.getElementById("flow_rate").value;
        var holeSize = document.getElementById("hole_size").value;
        var ROP = document.getElementById("ROP").value;
        document.getElementById("emd").innerHTML = (((mudWeight * parseInt(flowRate)) + (141.4296e-4 * ROP * (holeSize**2))) / (parseInt(flowRate)+(6.7995e-4 * ROP * holeSize**2))).toFixed(3);
      };

    </script>
  </body>
</html>
